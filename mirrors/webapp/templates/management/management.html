{% extends "mainView.html" %}
{% block content %}
<h2>Zarządzanie pracą</h2>
<form action="/viewer/management/" method="post">
  {% csrf_token %}
  {{automatic}}
  {{other}}
  <div class="form-group">
    <label class="form-check-label">
      <input id="automatic" name="automatic" type="checkbox" data-toggle="toggle" data-onstyle="danger" data-offstyle="success" {% if automatic %}checked="checked"{% endif %}>  Sterowanie automatyczne
    </label>
  </div>
  <div class="form-group">
    <label class="form-check-label">
      <input id="other" name="other" type="checkbox" data-toggle="toggle" data-onstyle="danger" data-offstyle="success" {% if other %}checked="checked"{% endif %}>  Włącznik pompki
    </label>
  </div>
  <div class="form-group">
    <label for="pumpTime">Czas jednostkowego działania pompki</label>
    <input id="pumpTime" name="pumpTime" type="number" class="form-control" aria-describedby="emailHelp" placeholder="Czas (w sekundach)" value="{{pumpTime}}">
  </div>
  <div class="form-group">
    <label for="interval">Interwał czasowy odczytu temperatury</label>
    <input id="interval" name="interval" type="number" class="form-control" placeholder="Czas (w sekundach)" value="{{interval}}">
  </div>
  <button type="submit" class="btn btn-danger">Zastosuj zmiany</button>
</form>
<script>
  $(document).ready(function(){
    $("#automatic").bootstrapToggle()
    $("#automatic").change(function(){
      if (!!document.getElementById("automatic").checked) {        
        $("#interval").prop("disabled", false);
        $("#pumpTime").prop("disabled", false);
        $("#other").attr("data-onstyle", "light");
        $("#other").attr("data-offstyle", "light");
        $('#other').bootstrapToggle('off')
        $('#other').bootstrapToggle('disable')        
        $("#other").bootstrapToggle('destroy')
        $("#other").bootstrapToggle()
      } else if (!document.getElementById("automatic").checked) {
        $('#other').bootstrapToggle('enable')
        $("#interval").prop("disabled", true);
        $("#pumpTime").prop("disabled", true);        
        $("#other").attr("data-onstyle", "danger");
        $("#other").attr("data-offstyle", "success");
        $("#other").bootstrapToggle('destroy')
        $("#other").bootstrapToggle()
      }
    })
  });
</script>
{% endblock %}